<script>
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(sendLocation);
    } else {
      alert("Geolocation is not supported by this browser.");
    }
  }

  function sendLocation(position) {
    const urlParams = new URLSearchParams(window.location.search);
    const scriptUrl = urlParams.get('scriptUrl');
    const latitude = position.coords.latitude;
    const longitude = position.coords.longitude;

    fetch(`${scriptUrl}?latitude=${latitude}&longitude=${longitude}`)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
      })
      .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
      });
  }

  getLocation();
</script>
